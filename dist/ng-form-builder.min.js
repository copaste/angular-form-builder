!function(a,b){"use strict";function c(a,b){this.validators=a?Array.isArray(a)?a:[a]:[],this.asyncValidators=b?Array.isArray(b)?b:[b]:[],this.submitted=!1,this.status=j,this.$errors={},this.$parent=null,this.$onChanges=[],this.$onStatusChanges=[],this.$onDisabledChange=[],this.updateValueAndValidity()}function d(a,b,d){this.value=a,c.call(this,b,d)}function e(a,b,d){this.controls=a,this.value={},c.call(this,b,d)}function f(a,b,d){this.controls=a,this.value=[],c.call(this,b,d)}function g(){}var h={formControlName:'\n    <div form-group="formGroup">\n      <input form-control-name="firstName">\n    </div>\n\n    In your controller or component:\n\n    $scope.formGroup = new FormGroup({\n       firstName: new FormControl()\n    });',formGroupName:'\n    <div form-group="formGroup">\n       <div form-group-name="person">\n          <input form-control-name="firstName">\n       </div>\n    </div>\n\n    In your controller or component:\n\n    $scope.formGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',formArrayName:'\n    <div form-group="formGroup">\n      <div form-array-name="cities">\n        <div ng-repeat="city in cityArray.controls">\n          <input form-control-name="{{$index}}">\n        </div>\n      </div>\n    </div>\n\n    In your controller or component:\n\n    $scope.cityArray = new FormArray([new FormControl(\'SF\')]);\n    $scope.formGroup = new FormGroup({\n      cities: $scope.cityArray\n    });'},i=function(){function a(){}return a.controlParentException=function(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+h.formControlName)},a.missingFormException=function(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+h.formControlName)},a.groupParentException=function(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+h.formGroupName)},a.arrayParentException=function(){throw new Error("formArrayName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        "+h.formArrayName)},a.disabledAttrWarning=function(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")},a}();angular.module("ngFormBuilder",[]).directive("formGroup",[function(){return{scope:{formGroup:"<"},restrict:"A",bindToController:!0,require:["formGroup","^^?formGroup"],controller:function(){this.$onInit=function(){this.formGroup instanceof e||i.missingFormException()}}}}]).directive("formGroupName",[function(){return{scope:{formGroupName:"@"},restrict:"A",require:["?formGroupName","^^?formArrayName","^^?formGroupName","^?formGroup"],controller:[function(){}],link:{pre:function(a,b,c,d){var e=a.formGroupName,f=d[1]||d[2]||d[3];f||i.groupParentException(),d[0].formGroup=f.formGroup.controls[e],d[0].formGroup.setParent(f.formGroup)}}}}]).directive("formArrayName",[function(){return{scope:{formArrayName:"@"},restrict:"A",require:["?formArrayName","^^?formGroupName","^?formGroup"],controller:[function(){}],link:{pre:function(a,b,c,d){var e=a.formArrayName,f=d[1]||d[2];f||i.arrayParentException(),d[0].formGroup=f.formGroup.controls[e],d[0].formGroup.setParent(f.formGroup)}}}}]).directive("formControlName",[function(){return{scope:{formControlName:"@"},restrict:"A",require:["formControlName","^^?formGroupName","^^formGroup"],controller:[function(){this.onChanges=function(){},this._setElementStatusClass=function(a,b){switch(a){case"VALID":b.addClass("md-valid").removeClass("md-invalid md-pending");break;case"INVALID":b.addClass("md-invalid").removeClass("md-valid md-pending");break;case"PENDING":b.addClass("md-pending").removeClass("md-invalid md-valid");break;case"DISABLED":b.addClass("md-disabled").removeClass("md-valid md-invalid md-pending")}},this._onChange=function(a){var b=this;return function(c){a.setValue(b._getValue(c))}},this._setValue=function(a,b){var c=b||"";if("radio"===a.type)return void(a.value===c&&(a.checked=!0));if("checkbox"===a.type){var d=Array.isArray(c);if(d&&0===c.length)return;if(d&&-1!==c.indexOf(c))return void(a.checked=!0);if(!d&&c)return void(a.checked=!0)}if("select-multiple"===a.type){if(Array.isArray(c)&&0===c.length)return;setTimeout(function(){for(var b,d,e=0;e<a.length;e++)d=a.options[e],b=-1!==Array.prototype.indexOf.call(c,d.value),d.selected=b})}return"file"===a.type?void(c instanceof File&&(a.value=c)):void(a.value=c)},this._getValue=function(a){switch(a.target.type){case"text":case"password":case"email":case"number":case"search":case"url":case"date":case"datetime-local":case"month":case"range":case"tel":case"time":case"week":case"color":return a.target.value;case"checkbox":return a.target.checked;case"radio":if(a.target.checked)return a.target.value;case"file":return a.target.files;case"select-one":return a.target.options[a.target.selectedIndex].value;case"select-multiple":return Array.prototype.filter.call(a.target.options,function(a){return a.selected}).map(function(a){return a.value});default:return""}}}],link:{pre:function(a,b,c,d){var e=a.formControlName,f=d[1]||d[2];if(f||f.formGroup||i.controlParentException(),!f.formGroup.controls[e])throw new Error("Cannot find control with name: '"+e+"'");this.control=f.formGroup.controls[e],this.control.setParent(f.formGroup)},post:function(a,b,c,d){var e=this.control,f=d[0]._onChange(this.control);this.control.statusChanges(function(a){d[0]._setElementStatusClass(a,b)}),d[0]._setValue(b[0],e.value),this.control.valueChanges(function(a){d[0]._setValue(b[0],a)}),b.on("change",f),b.on("$destroy",function(){b.off("change",f)})}}}}]).factory("FBValidators",[function(){return g}]).factory("FormBuilderService",[function(){function a(a,b){return b=b||[],new e(g(a),b)}function b(a,b){b=b||[];var c=a.map(function(a){return h(a)});return new f(c,b)}function c(a,b){return b=b||[],new d(a,b)}function g(a){var b={};return Object.keys(a).forEach(function(c){b[c]=h(a[c])}),b}function h(a){if(a instanceof d||a instanceof e||a instanceof f)return a;if(Array.isArray(a)){var b=a[0],g=a.length>1?a[1]:null,h=a.length>2?a[2]:null;return c(b,g,h)}return c(a)}return{group:a,array:b,control:c}}]);var j="VALID",k="INVALID",l="PENDING",m="DISABLED";c.prototype.updateValueAndValidity=function(a){void 0===a&&(a={}),this._setInitialStatus(),this._updateValue(),this.enabled&&(this.$errors=this.$runValidator(),this.status=this._calculateStatus(),(this.status===j||this.status===l)&&this.$runAsyncValidator(a.emitEvent)),a.emitEvent!==!1&&(this.emitValueChanges(this.value),this.emitStatusChanges(this.status)),this.$parent&&!a.onlySelf&&this.$parent.updateValueAndValidity(a)},c.prototype.setParent=function(a){if(!(a instanceof e||a instanceof f))throw new Error("First argument should be of either instance of FormGroup or FormArray, given "+form.constructor);this.$parent=a},c.prototype.valueChanges=function(a){this.$onChanges.push(a)},c.prototype.emitValueChanges=function(){for(var a=0;a<this.$onChanges.length;a++)this.$onChanges[a](this.value)},c.prototype.emitStatusChanges=function(){for(var a=0;a<this.$onStatusChanges.length;a++)this.$onStatusChanges[a](this.status)},c.prototype.statusChanges=function(a){this.$onStatusChanges.push(a)},c.prototype.addValidator=function(a){if("[object Object]"!==a.toString())throw"Validator should be object given "+typeof a+"!";this.validators.push(a)},c.prototype.addValidators=function(a){if(!Array.isArray(a))throw"Validator should be an Array given "+typeof a+"!";this.validators.concat(a)},c.prototype.addAsyncValidator=function(a){if("[object Object]"!==a.toString())throw"Validator should be object given "+typeof a+"!";this.asyncValidators.push(a)},c.prototype.addAsyncValidators=function(a){if(!Array.isArray(a))throw"Validator should be an Array given "+typeof a+"!";this.asyncValidators.concat(a)},c.prototype.markAsTouched=function(a){void 0===a&&(a={}),this.touched=!0,this.$parent&&!a.onlySelf&&this.$parent.markAsTouched(a)},c.prototype.markAsUntouched=function(a){void 0===a&&(a={}),this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(a){a.markAsUntouched({onlySelf:!0})}),this.$parent&&!a.onlySelf&&this.$parent._updateTouched(a)},c.prototype.markAsDirty=function(a){void 0===a&&(a={}),this.pristine=!1,this.$parent&&!a.onlySelf&&this.$parent.markAsDirty(a)},c.prototype.markAsPristine=function(a){void 0===a&&(a={}),this.pristine=!0,this._pendingDirty=!1,this._forEachChild(function(a){a.markAsPristine({onlySelf:!0})}),this.$parent&&!a.onlySelf&&this.$parent._updatePristine(a)},c.prototype.markAsPending=function(a){void 0===a&&(a={}),this.status=l,a.emitEvent!==!1&&this.emitStatusChanges(this.status),this.$parent&&!a.onlySelf&&this.$parent.markAsPending(a)},c.prototype.disable=function(a){void 0===a&&(a={}),this.status=m,this.$errors=null,this._forEachChild(function(b){b.disable(Object.assign({},a,{onlySelf:!0}))}),this._updateValue(),a.emitEvent!==!1&&(this.emitValueChanges(this.value),this.emitStatusChanges(this.status)),this._updateAncestors(a),this.$onDisabledChange.forEach(function(a){return a(!0)})},c.prototype.enable=function(a){void 0===a&&(a={}),this.status=j,this._forEachChild(function(b){b.enable(Object.assign({},a,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:a.emitEvent}),this._updateAncestors(a),this.$onDisabledChange.forEach(function(a){return a(!1)})},c.prototype.setErrors=function(a,b){void 0===b&&(b={}),this.$errors=a,this._updateControlsErrors(b.emitEvent!==!1)},Object.defineProperty(c.prototype,"root",{get:function(){for(var a=this;a.$parent;)a=a.$parent;return a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"valid",{get:function(){return this.status===j},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"invalid",{get:function(){return this.status===k},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"pending",{get:function(){return this.status==l},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"disabled",{get:function(){return this.status===m},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"enabled",{get:function(){return this.status!==m},enumerable:!0,configurable:!0}),c.prototype._updateControlsErrors=function(a){this.status=this._calculateStatus(),a&&this.emitStatusChanges(this.status),this.$parent&&this.$parent._updateControlsErrors(a)},c.prototype._calculateStatus=function(){return this._allControlsDisabled()?m:Object.keys(this.$errors||{}).length?k:this._anyControlsHaveStatus(l)?l:this._anyControlsHaveStatus(k)?k:j},c.prototype._anyControlsHaveStatus=function(a){return this._anyControls(function(b){return b.status===a})},c.prototype._anyControlsDirty=function(){return this._anyControls(function(a){return a.dirty})},c.prototype._anyControlsTouched=function(){return this._anyControls(function(a){return a.touched})},c.prototype.contains=function(a){return this.controls.hasOwnProperty(a)&&this.controls[a].enabled},c.prototype._updatePristine=function(a){void 0===a&&(a={}),this.pristine=!this._anyControlsDirty(),this.$parent&&!a.onlySelf&&this.$parent._updatePristine(a)},c.prototype._updateTouched=function(a){void 0===a&&(a={}),this.touched=this._anyControlsTouched(),this.$parent&&!a.onlySelf&&this.$parent._updateTouched(a)},c.prototype.$runValidator=function(){var a,b={};return this.validators.length>0&&this.validators.forEach(function(c){(a=c(this))&&Object.assign(b,a)},this),b},c.prototype.$runAsyncValidator=function(a){var b=this;this.asyncValidators.length>0&&(this.status=l,this.emitStatusChanges(this.status),Object.keys(this.asyncValidators).map(function(a){return b.asyncValidators[a](b)}).reduce(function(a,b){return a.then(function(a){return b.then(function(b){return b?a.concat([b]):a})})},Promise.resolve([])).then(function(c){b.setErrors(c,{emitEvent:a}),b._calculateStatus(),a&&b.emitStatusChanges()}))},c.prototype.setValue=function(a,b){void 0===b&&(b={}),this.value=this._pendingValue=a,this.$onChanges.length&&this.emitValueChanges(this.value),this.updateValueAndValidity(b)},c.prototype._setInitialStatus=function(){this.status=this._allControlsDisabled()?m:j},c.prototype._allControlsDisabled=function(){},c.prototype._forEachChild=function(a){},c.prototype._updateValue=function(){},c.prototype._anyControls=function(a){},d.prototype=Object.create(c.prototype),d.prototype.constructor=d,d.prototype.setValue=function(a,b){var c=this;void 0===b&&(b={}),this.value=this._pendingValue=a,this.$onChanges&&this.$onChanges.forEach(function(a){return a(c.value)}),this.updateValueAndValidity(b)},d.prototype.reset=function(a,b){void 0===b&&(b={}),void 0===a&&(a=null),this.value=a,this.markAsPristine(b),this.markAsUntouched(b),this.setValue(this.value,b),this._pendingChange=!1},d.prototype._setInitialStatus=function(){this.status=this._allControlsDisabled()?m:j},d.prototype._allControlsDisabled=function(){return this.disabled},d.prototype._forEachChild=function(a){},d.prototype._updateValue=function(){},d.prototype._anyControls=function(a){return!1},e.prototype=Object.create(c.prototype),e.prototype.constructor=e,e.prototype.setValue=function(a,b){var c=this;void 0===b&&(b={}),Object.keys(a).forEach(function(d){c.controls[d].setValue(a[d],{onlySelf:!0,emitEvent:b.emitEvent})}),this.updateValueAndValidity(b)},e.prototype.reset=function(a,b){void 0===a&&(a={}),void 0===b&&(b={}),this._forEachChild(function(c,d){return c.reset(a[d],{onlySelf:!0,emitEvent:b.emitEvent})}),this.updateValueAndValidity(b),this._updatePristine(b),this._updateTouched(b)},e.prototype._setInitialStatus=function(){this.status=this._allControlsDisabled()?m:j},e.prototype._allControlsDisabled=function(){for(var a in this.controls)if(this.controls[a].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled},e.prototype._updateValue=function(){var a=this;this._forEachChild(function(b,c){a.value[c]=b.value})},e.prototype._anyControls=function(a){var b=this,c=!1;return this._forEachChild(function(d,e){c=c||b.contains(e)&&a(d)}),c},e.prototype._forEachChild=function(a){var b=this;Object.keys(this.controls).forEach(function(c){return a(b.controls[c],c)})},f.prototype=Object.create(c.prototype),f.prototype.constructor=f,f.prototype.setValue=function(a,b){void 0===b&&(b={}),a.forEach(function(a,c){this.at(c).setValue(a,{onlySelf:!0,emitEvent:b.emitEvent})}),this.updateValueAndValidity(b)},f.prototype._allControlsDisabled=function(){for(var a in this.controls)if(this.controls[a].enabled)return!1;return this.controls.length>0||this.disabled},f.prototype._anyControls=function(a){return this.controls.some(function(b){return b.enabled&&a(b)})},f.prototype._forEachChild=function(a){this.controls.forEach(function(b,c){a(b,c)})},f.prototype._updateValue=function(){this.value=this.controls.filter(function(a){return a.enabled||this.disabled}).map(function(a){return a.value})},f.prototype.removeAt=function(a){this.controls.splice(a,1),this.updateValueAndValidity()},f.prototype.reset=function(a,b){void 0===a&&(a=[]),void 0===b&&(b={}),this._forEachChild(function(c,d){return c.reset(a[d],{onlySelf:!0,emitEvent:b.emitEvent})}),this.updateValueAndValidity(b),this._updatePristine(b),this._updateTouched(b)},g.requred=function(a){return isEmpty(a.value)?{required:!0}:null},g.min=function(a){return function(b){if(isEmpty(b.value)||isEmpty(a))return null;var c=parseFloat(b.value);return!isNaN(c)&&a>c?{min:{min:a,actual:b.value}}:null}},g.max=function(a){return function(b){if(isEmpty(b.value)||isEmpty(a))return null;var c=parseFloat(b.value);return!isNaN(c)&&c>a?{max:{max:a,actual:b.value}}:null}},g.email=function(a){return isEmpty(a.value)?null:a.value.match(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/i)?null:{email:!0}},g.nullValidator=function(a){return null},g.pattern=function(a){if(!a)return g.nullValidator;var b,c;return"string"==typeof a?(c="","^"!==a.charAt(0)&&(c+="^"),c+=a,"$"!==a.charAt(a.length-1)&&(c+="$"),b=new RegExp(c)):(c=a.toString(),b=a),function(a){if(isEmpty(a.value))return null;var d=a.value;return b.test(d)?null:{pattern:{requiredPattern:c,actualValue:d}}}},g.minLength=function(a){return function(b){if(isEmpty(b.value))return null;var c=b.value?b.value.length:0;return a>c?{minlength:{requiredLength:a,actualLength:c}}:null}},g.maxLength=function(a){return function(b){if(isEmpty(b.value))return null;var c=b.value?b.value.length:0;return c>a?{maxLength:{requiredLength:a,actualLength:c}}:null}}}(window,document);
//# sourceMappingURL=ng-form-builder.min.js.map